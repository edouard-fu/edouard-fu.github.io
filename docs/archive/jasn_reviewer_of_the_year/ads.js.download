/*! For license information please see ads.js.LICENSE.txt */
(self.webpackChunkoaks_journals_core=self.webpackChunkoaks_journals_core||[]).push([[695],{87234:()=>{const e=window.jQuery;let t,n;const o=(e,t)=>n.serverURL+"?correlator=[timestamp]&env=vp&gdfp_req=1&unviewed_position_start=1&output=vast&iu="+t+"&sz="+n.sizes+"&description_url="+encodeURIComponent(window.location.href)+"&url="+encodeURIComponent(window.location.href)+"&impl=s&cust_params="+encodeURIComponent(i(e)),i=n=>{if(!t||!t.pageTargeting)return;let o="";for(const e in t.pageTargeting){let n=t.pageTargeting[e];if(Array.isArray(n)){let e="";for(let t=0;t<n.length;t++)e+=t?",":"",e+=encodeURIComponent(n[t]);n=e}else n=encodeURIComponent(n);o+=o.length?"&":"",o+=e+"="+n}return void 0===t.pageTargeting.VideoName&&(o+=o.length?"&":"",o+="VideoName="+encodeURIComponent(e("[data-entry-id="+n.entry_id+"]").attr("data-videotitle"))),o},a=e=>{if(!e)return;let t=e.flashvars;t||(t=e.flashvars={});let n=t.vast;n||(n=t.vast={});let o=t.doubleClick;o||(o=t.doubleClick={}),o.adTagUrl=n.prerollUrl,n.prerollUrl=void 0},s=t=>{if(!t)return;const n=function(t,n,o,i,a){if("overlay"!==o)return;const s=e("#"+this.id+" iframe").contents(),r=this.id+"_overlay_btn_close_css_fix";s.find("html head style#"+r).length||s.find("html head").append(e('<style type="text/css" id="'+r+'" />').html(".mwPlayerContainer .videoHolder .btn.icon-close {   height: 1.5em !important;   width: 1.5em !important;   border-radius: .7em !important;   position: absolute !important;   top: -.75em !important;   right: -.75em !important;   line-height: 1.5em !important;   text-align: center !important;}"))};d(t,(function(e){document.getElementById(e).kBind("onAdPlay",n)}))},r=t=>{if(!t)return;const n=function(t,n,o,i,a){if("overlay"===o)return;const s=e("#"+this.id+" iframe").contents(),r=this.id+"_linear_ad_notice_css_fix";s.find("html head style#"+r).length||s.find("html head").append(e('<style type="text/css" id="'+r+'" />').html(".ad-component {   font-size: 11px !important;   line-height: 21px !important;}.ad-skip-btn {   font-size: 18px !important;}"))};d(t,(function(e){document.getElementById(e).kBind("onAdPlay",n)}))},d=(e,t)=>{if(!e||!t)return;const n=e.readyCallback;e.readyCallback="function"==typeof n?function(e){n.call(this,e),t.call(this,e)}:t};window.KalturaVideoAdConfig=e=>{e&&e.player&&e.ads&&(t=window.adConfig,n=window.videoAdConfig,e.ads.showOverlay&&(e=>{if(!e)return;let t=e.flashvars;t||(t=e.flashvars={});let i=t.vast;i||(i=t.vast={}),i.overlayUrl=o(e,n.overlayUnitPath),i.overlayStartAt="0",i.timeout="86400"})(e.player),e.ads.showPreroll&&(e=>{if(!e)return;let t=e.flashvars;t||(t=e.flashvars={});let i=t.vast;i||(i=t.vast={}),i.prerollUrl=o(e,n.prerollUnitPath),a(e)})(e.player),e.ads.showOverlay&&s(e.player),e.ads.showPreroll&&((e=>{if(!e)return;let t=e.flashvars;t||(t=e.flashvars={});let n=t.noticeMessage;n||(n=t.noticeMessage={}),n.text||(n.text="Advertisement {sequenceProxy.timeRemaining}");let o=t.skipBtn;o||(o=t.skipBtn={}),o.skipOffset||(o.skipOffset=5);let i=t.skipNotice;i||(i=t.skipNotice={}),i.text||(i.text="You can skip this ad in {sequenceProxy.skipOffsetRemaining}")})(e.player),r(e.player)),(e=>{if(!e)return;let t=e.flashvars;if(t||(t=e.flashvars={}),t.autoPlay&&(window.performance.navigation.type!==window.performance.navigation.TYPE_NAVIGATE||0!==document.referrer.indexOf(location.protocol+"//"+location.host))){const e=window.MWEMBED_VERSION.split(".");e[0]>2||2==e[0]&&e[1]>=62||(t.autoMute=!0)}})(e.player))}},93363:(e,t,n)=>{"use strict";const o={top:e=>{let t=!0;const n="stick-top",o=document.querySelector(".advertisement-content_top");if(o&&o.clientHeight/window.innerHeight<=.3){const i=o.clientHeight,a=()=>{if(window.scrollY>i/2){if(t&&(o.classList.add(n),null!==document.querySelector(".header.fixed"))){"0px"===window.getComputedStyle(document.querySelector(".header.fixed")).top&&(document.querySelector(".header.fixed").style.top=o.offsetHeight.toString()+"px")}}else o.classList.remove(n),null!==document.querySelector(".header.fixed")&&(document.querySelector(".header.fixed").style.top="")};setTimeout((()=>{t=!1,o.classList.remove(n),null!==document.querySelector(".header.fixed")&&(document.querySelector(".header.fixed").style.top=""),window.removeEventListener("scroll",a)}),e),a(),window.addEventListener("scroll",a)}},highimpact:e=>{const t=document.querySelector(".js-advertisement-highimpact"),n=t.querySelector(".ejp-advertisement-header");if(!t||!n)return;const o="ejp-advertisement-highimpact--loaded";let i;const a=()=>{t.classList.remove(o)},s=document.createElement("div"),r=document.createElement("button");r.type="button",r.innerHTML='<span class="wk-icon-close" aria-hidden="true"></span><span class="wk-sr-only">Close</span>',r.classList.add("wk-button","wk-button-icon"),r.addEventListener("click",(()=>{i&&clearTimeout(i),a()})),s.appendChild(r),s.classList.add("ejp-advertisement-header__btn-close"),n.append(s),t.classList.add(o),t&&(i=setTimeout((()=>{a()}),e))}},i=e=>{let t;return t=(e=e||window.location.href).replace(/[:/?&=]/g," "),t=t.replace(/['=!#~;<>&\+\*\^\(\)\[\]\,\"_]/g," "),t=t.replace(/[ |\s]+/g," "),t},a=(e,t)=>{if(e&&t){const n=Object.keys(t);for(let o=0;o<n.length;o++)e.setTargeting(n[o],t[n[o]])}},s=e=>{const t=window.jQuery;let n=[];return t&&e&&(n=t(e).toArray()),n},r=(e,t)=>{let n=[];const o=e.split(",");for(const e in o){const t=s(o[e]);n=n.concat(t)}if(!n||!n.length||t<=0)return null;n=n.filter(((e,t)=>n.indexOf(e)===t));let i=[];const a=n.length/t;if(a<=1)i=n;else if(a>1&&a<=2)i=n.slice(0,t);else if(a>2){const e=Math.floor(a),t=n.length-Math.floor(n.length/e)*e-1;for(let o=0;o<n.length;o++){(o<t-1||(o-t)%e==0)&&i.push(n[o])}}return i},d=e=>{const t=document.createElement("div"),n=document.createElement("div"),o=Object.keys(e),i=(e,t,n)=>{e.setAttribute(t,n)};i(t,"class","ej-advertisement-content");for(let t=0;t<o.length;t++){const a=o[t];i(n,a,e[a])}return t.appendChild(n),t},l=e=>{if(!e)return!1;try{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(e){}},c=function(){this.adConfig={};let e=0;const t=[],n={},i="ej-advertisement-title";this.configure=e=>{this.adConfig=e};const s=e=>{let t=document.getElementById(e.id);if(!t)return null;if(e.outOfPage)t=u.defineOutOfPageSlot(e.adPath,e.id).addService(u.pubads());else try{t=u.defineSlot(e.adPath,[],e.id).defineSizeMapping(e.sizeMap).addService(u.pubads())}catch(e){u.pubads().refresh()}return t},c=e=>{if(!e)return;const t=document.getElementById(e.id);t.setAttribute("id","");const n=document.createElement("div");if(n.classList.add("ejp-advertisement-header"),t.appendChild(n),e.displaySlug){const e=document.createElement("div");e.classList.add(i),n.appendChild(e)}const o=document.createElement("div");o.setAttribute("id",e.id),t.appendChild(o),o.classList.add("ad-placeholder")};this.setPageTargeting=e=>{if(!e)return;const t=Object.keys(e);for(let n=0;n<t.length;n++)u.pubads().setTargeting(t[n],e[t[n]])};const p=t=>{e<=0?window.removeEventListener("scroll",p):g()},g=()=>{for(let o=0;o<t.length;o++){const i=n[t[o]],s=document.getElementById(i.id);if(!s)return;!1===i.refreshed&&(!1===this.adConfig.lazyLoadingEnabled||i.autoLoad||l(s))&&u.cmd.push((()=>{a(i.slot,i.slotTargeting),u.display(i.id),this.adConfig.lazyLoadingEnabled&&u.pubads().refresh([i.slot]),i.refreshed=!0,e--}))}};this.displayAds=()=>{window.bodyAdsConfiguration&&(e=>{if(e&&e.length)for(const t in e){const n=e[t],o=r(n.cssSelectors,n.slots.length);if(o)for(const e in o){const t=o[e],i=n.slots[e],a=d(i);t.parentNode.insertBefore(a,t.nextSibling)}}})(window.bodyAdsConfiguration),((e,t,n)=>{let o=document.querySelectorAll(`div.${n}`);o&&o.length&&(o=[].slice.call(o),o.map((n=>{const o=n,i=o.getAttribute("id");if(!i)return;t.push(i);const a={};a.id=i,a.sizeMap=o.dataset.sizemap?JSON.parse(o.dataset.sizemap):[],a.refreshed=!1,a.adPath=o.dataset.adpath,a.autoLoad="yes"===o.dataset.autoload,a.outOfPage="yes"===o.dataset.outofpage,a.sticky="yes"===o.dataset.sticky,a.stickyDuration=o.dataset.stickyDuration,a.slotTargeting=o.dataset.slottargeting?JSON.parse(o.dataset.slottargeting):{},a.name=o.dataset.name,a.displaySlug="yes"===o.dataset.displayslug,e[i]=a})))})(n,t,this.adConfig.slotClass),u.cmd.push((()=>{(()=>{const t=Object.keys(n);for(let o=0;o<t.length;o++){const i=n[t[o]];c(i),i.slot=s(i),i.slot&&!1===i.refreshed&&e++}})(),this.setPageTargeting(this.adConfig.pageTargeting),u.pubads().collapseEmptyDivs(),this.adConfig.lazyLoadingEnabled&&u.pubads().disableInitialLoad(),u.enableServices(),g(),u.pubads().addEventListener("slotOnload",(e=>{const t=e.slot.getSlotElementId(),a=n[t],s=document.getElementById(a.id);a&&a.displaySlug&&!1===a.outOfPage&&((e,t,n)=>{if(!e)return;const o=e.parentNode.querySelector(`.${t}`);o&&(o.textContent=n)})(s,i,this.adConfig.adTitle),a&&!0===a.sticky&&s&&(e=>{const{name:t,stickyDuration:n}=e,i=1e3*n;o[t?.toLowerCase()]?.(i)})(a)}))})),window.addEventListener("scroll",p)}},u=window.googletag||{};u.cmd=u.cmd||[],window.googletag=u,window.adService=new c;n(87234);const p=()=>{try{const e=window.adService,t=((e="js-ad-config")=>{const t=document.querySelector(`.${e}`);if(!t)return null;const n=t.dataset.videoadconfig,o=t.dataset.adconfig;if(!o||!n)return null;const i={},a=JSON.parse(o);return a.pageTargeting=a.pageTargeting||{},i.adConfig=a,i.videoAdConfig=JSON.parse(n),i})();if(!t)return;const n=t.adConfig;window.adConfig=n;const o=t.videoAdConfig;window.videoAdConfig=o;(()=>{n.pageTargeting.URL=window.location.href,n.pageTargeting.UrlSegments=i(),n.pageTargeting.UriSegments=(e=>{let t=[];try{e=e||window.location.href;const n=i(e);n&&(t=n.split(" "))}catch(e){window.console.error(e)}return t})(),n.pageTargeting.cid=n.npiHash})();(()=>{const t=(e=>{let t={delay:n||!1,period:o||0};var n,o;for(let n=0;n<e.length;n++){const o=(0,e[n])();if(o&&o.delay){t=o;break}}return t})([]);e.configure(n);const o=e.displayAds.bind(e);setTimeout(o,t.period)})()}catch(e){console.log(`Error in adsInit: ${e.message}`)}};p()}},e=>{var t;t=93363,e(e.s=t)}]);
//# sourceMappingURL=ads.js.map